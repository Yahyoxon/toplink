(function(){(function(){var w=/%20/g,k={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};function A(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function p(){var e={};if(location.search!=="")for(var t=location.search.replace("?","").split("&"),o=0;o<t.length;o++){var n=t[o].split("="),i=n[0],r=n[1];!r||(i=decodeURIComponent(i).replace(/[^a-zA-Z0-9-_]/gi,""),r=decodeURIComponent(r),i in e?(Array.isArray(e[i])||(e[i]=[e[i]]),e[i].push(r)):e[i]=r)}return e}function a(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),decodeURIComponent(document.cookie.substring(c_start,c_end))):""}function s(e,t,o){var n=document.location.host.toLowerCase().split(":")[0],i=n.split("."),r=[];if(i.length==1){var c=new Date;c.setDate(c.getDate()+o),document.cookie=e+"="+escape(t)+(o==null?"":";expires="+c.toUTCString())+";path=/"}else for(var g=i.length-1;g>=0;g--){r.push(i[g]);var E="."+r.slice().reverse().join("."),c=new Date;if(c.setDate(c.getDate()+o),document.cookie=e+"="+escape(t)+(o==null?"":";expires="+c.toUTCString())+";domain="+E+";path=/",a(e)==t)break}}function m(e){s(e,"",-1)}function N(e){return u(e)==="function"}function u(e){return e==null?String(e):k[Object.prototype.toString.call(e)]||"object"}function v(e){typeof console!="undefined"&&console.warn("_cio: "+e)}function b(e,t){var o=[],n=function(r,c){c=N(c)?c():c,o[o.length]=encodeURIComponent(r)+"="+encodeURIComponent(c)};for(var i in e)e.hasOwnProperty(i)&&d(i,e[i],n,t);return o.join("&").replace(w,"+")}function d(e,t,o,n){if(n!=null&&n.useArrayParams&&u(t)==="array")for(var i=0;i<t.length;i++)d(e+"[]",t[i]==null?"":t[i],o,n);else if(t!=null&&typeof t=="object")for(var r in t)t.hasOwnProperty(r)&&d(e+"["+r+"]",t[r]==null?"":t[r],o,n);else o(e,t)}function C(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function P(){var e=C();return s(_cio.cookieNamespace+"anonid",e,365),e}function I(e){try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function h(){var e=a("ajs_anonymous_id");return e&&e!==""?I(e):a(_cio.cookieNamespace+"anonid")}function l(){return a(_cio.cookieNamespace+"id")}function U(e,t,o){var n,i,r=document.getElementById("cio-tracker");if(r){i=r.getAttribute("data-site-id"),n=r.src.replace("assets.customer.io",_cio._trackUrl),n=n.replace("/assets/track.js","/events/"+e+".gif"),n=n.replace(/\/events\/.*\.gif/,"/events/"+e+".gif"),n=n.replace(/^(http|https):/,""),n=n.replace(/^\/\//,""),t.site_id=i,t.timestamp=new Date().getTime(),n[n.length-1]!=="?"&&(n+="?");var c={useArrayParams:!1};r.getAttribute("data-use-array-params")==="true"&&(c.useArrayParams=!0),u(o)==="object"&&u(o.useArrayParams)==="boolean"&&(c.useArrayParams=o.useArrayParams),n+=b(t,c)}return location.protocol?location.protocol+"//"+n:"https://"+n}function R(){if(!a(_cio.cookieNamespace)){if(s(_cio.cookieNamespace,"test",1),!a(_cio.cookieNamespace))return!1;s(_cio.cookieNamespace,"",-1)}return!0}function S(e,t,o){t.c=l(),t.c?t.s=h():(t.s=h(),!t.s&&R()&&e!=="identify"&&(t.s=P()));var n=new Image;n.src=U(e,t,o),_cio.images.push(n)}function f(e,t,o){_cio.pageHasLoaded?S(e,t,o):setTimeout(function(){f(e,t,o)},50)}function L(e){var t=document.createElement("script"),o=document.getElementsByTagName("script")[0];t.async=!0,t.src=e,o.parentNode.insertBefore(t,o)}if(u(_cio)=="array"){var y=_cio.slice(0);_cio={_version:"c63fff58",_trackUrl:"track.customer.io",_plugins:[],_findCustomer:l,_warn:v,images:[],pageHasLoaded:!1,cookieNamespace:"_cio",load:function(){_cio.pageHasLoaded=!0;var e=document.getElementById("cio-tracker");e.getAttribute("data-use-in-app")==="true"&&L(location.protocol+"//assets.customer.io/assets/in-app.js")},notifyPluginLoaded:function(e){_cio._plugins.push(new e(_cio))},push:function(e){var t=e.shift();_cio[t].apply(this,e)},identify:function(e,t){var o=e.id||e.id_secure;if(typeof o=="undefined"||o===null||o.length===0){v("id can't be empty. This identify call will not be tracked.");return}s(_cio.cookieNamespace+"id",o,365),f("identify",{user:e},t||{});for(var n=0;n<_cio._plugins.length;n++)_cio._plugins[n].initialized()&&_cio._plugins[n].identify(_cio,o)},sidentify:function(e){e._secure=!0,_cio.identify(e)},track:function(e,t,o){f("event",{name:e,data:t||{}},o||{})},page:function(e,t,o){var n=A(t||{},p());f("page",{name:e,data:n},o||{})},cookie:function(e){_cio.cookieNamespace=e},reset:function(){_cio.images=[],m(_cio.cookieNamespace+"id"),m(_cio.cookieNamespace+"anonid")}},function(){var e={width:window.innerWidth,height:window.innerHeight},t=l();if(!t){var o=p();if("_cio_id"in o&&o._cio_id){var n=o._cio_id;Array.isArray(n)&&(n=n[n.length-1]),n&&_cio.identify({id:"cio_"+n})}}document.referrer&&document.referrer!=""&&(e.referrer=document.referrer),_cio.page(document.location.href,e)}();for(var _=0;_<y.length;_++)_cio.push(y[_]);document.readyState==="complete"?_cio.load():window.addEventListener?window.addEventListener("load",_cio.load,!1):window.attachEvent?window.attachEvent("onload",_cio.load):_cio.load()}})();})();
